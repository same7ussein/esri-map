<div class="relative w-full h-screen border border-gray-300 mb-5">
    <app-map (mapLoaded)="onMapLoaded()" />
    @if (!mapLoading()) {
    <div class="absolute top-0 left-0 right-0 bg-white h-2/3 ">
        <div class="flex items-center justify-between p-4 text-white bg-slate-700">
            <button class="text-lg" routerLink="/services">
                <mat-icon>keyboard_arrow_left</mat-icon>
            </button>
            <h1 class="text-lg font-semibold">Request Follow Up</h1>
            <button class="text-lg">
                <mat-icon>menu</mat-icon>
            </button>
        </div>
        <ol class="flex items-center w-full px-6 mx-auto my-10 lg:w-1/2">
            @for (status of statuses(); track status;let index=$index; let last=$last) {
            <li [ngClass]="{
                                        'after:w-full after:border-2 after:inline-block w-full': !last,
                                        'after:border-green-400': index < 1,   
                                    }" class="flex items-center after:content-['']">
                <div class="flex flex-col">
                    <span
                        [ngClass]=" {' border-green-400 text-green-400 dark:border-green-400 dark:text-green-400':index <2}"
                        class="relative flex items-center justify-center w-10 h-10 rounded-full lg:h-12 lg:w-12 shrink-0 border-2 border-gray-300 text-gray-500 dark:border-gray-600 dark:text-gray-400">
                        {{ index + 1 }}
                        <label class="absolute top-full whitespace-nowrap">{{ status }}</label>
                    </span>
                </div>
            </li>
            }

        </ol>
        <hr>
        <div class="w-full p-4 mx-auto mt-5 lg:p-0 lg:w-1/2">
            <div class="flex items-center space-x-4">
                <img src="./assets/Wavy_Tech-19_Single-09.jpg" alt="Provider Logo" class="w-20 h-20 rounded-full">
                <div>
                    <h2 class="text-lg font-semibold">Sameh</h2>
                    <h2 class="text-lg font-semibold">+201205716153</h2>
                    <div class="stars">
                        @for (item of [1,2,3,4,5]; track $index; let last=$last) {
                        <mat-icon [ngClass]="!last ? 'text-yellow-300' : 'text-gray-500'">star</mat-icon>
                        }
                    </div>
                </div>
            </div>
            <div class="flex mt-4 space-x-4">
                <button class="w-full px-4 py-2 text-white bg-red-500 rounded" (click)="cancelService()">Cancel</button>
                <a href="tel:+201205716153" class="w-full">
                    <button class="w-full px-4 py-2 text-white bg-green-500 rounded">Call</button>
                </a>
            </div>
        </div>
    </div>
    }@else {
    <app-loading />
    }
</div>